<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="12.css">
</head>

<body>

    <h1>Shopping Cart</h1>

    <table border="1" align="center" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>Photo</th>
                <th>Game Name</th>
                <th>Price</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="cart-body">
            <tr>
                <td><img src="download.jpeg" alt="This is Photo" width="100"></td>
                <td><h3>Valorant</h3></td>
                <td class="price">30$</td>
                <td>
                    <button class="delete-btn">Delete</button>
                    <button class="buy-btn">Buy</button>
                </td>
            </tr>
            <tr>
                <td><img src="download (1).jpeg" alt="This is Photo" width="100"></td>
                <td><h3>FC25</h3></td>
                <td class="price">25$</td>
                <td>
                    <button class="delete-btn">Delete</button>
                    <button class="buy-btn">Buy</button>
                </td>
            </tr>
            <tr>
                <td><img src="download (2).jpeg" alt="This is Photo" width="100"></td>
                <td><h3>GTA V</h3></td>
                <td class="price">20$</td>
                <td>
                    <button class="delete-btn">Delete</button>
                    <button class="buy-btn">Buy</button>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="total-price" style="text-align: center; margin-top: 20px;">
        <strong>Total: $<span id="total">0</span></strong>
    </div>

    <script>
        let total = 0;

        function updateTotal() {
            document.getElementById("total").textContent = total;
        }

        document.querySelectorAll(".delete-btn").forEach(button => {
            button.addEventListener("click", function () {
                let row = this.closest("tr");
                let price = parseInt(row.querySelector(".price").textContent.replace("$", ""));
                
                if (row.classList.contains("bought")) {
                    total -= price;
                }

                row.remove();
                updateTotal();
            });
        });

        document.querySelectorAll(".buy-btn").forEach(button => {
            button.addEventListener("click", function () {
                let row = this.closest("tr");
                let price = parseInt(row.querySelector(".price").textContent.replace("$", ""));

                if (!row.classList.contains("bought")) {
                    total += price;
                    row.classList.add("bought");
                    this.style.backgroundColor = "gray";
                    this.textContent = "Bought";

                    
                    setTimeout(() => {
                        location.href = 'payment.html';
                    }, 500); 
                }

                updateTotal();
            });
        });

        updateTotal();
    </script>

</body>

</html>
